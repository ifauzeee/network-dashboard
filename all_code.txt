===== START FILE: C:\Users\Ibnu\Project\network-dashboard\static\app.js =====
// File: static/app.js

document.addEventListener('DOMContentLoaded', function () {
    // DOM elements and variables for state management
    const mainContent = document.getElementById('main-content');
    const menuItems = document.querySelectorAll('.menu-item');
    const darkModeButton = document.getElementById('toggleDarkMode');
    
    // (NEW) Variables for the hamburger menu
    const sidebar = document.querySelector('.sidebar');
    const hamburgerBtn = document.getElementById('hamburger-menu');

    let liveUpdateInterval; // Interval for the dashboard's live speed updates
    let networkChart = null; // Chart.js instance for network speed
    let avgChart = null; // Chart.js instance for average speed
    let ipMap = null; // Leaflet map instance for the IP page

    /**
     * Loads a new page dynamically into the main content area.
     * @param {string} page The name of the page to load (e.g., 'dashboard', 'speedtest').
     */
    function loadPage(page = 'dashboard') {
        // Clear any existing live update intervals or map instances to prevent memory leaks
        if (liveUpdateInterval) clearInterval(liveUpdateInterval);
        if (ipMap) {
            ipMap.remove();
            ipMap = null;
        }

        // Fetch the HTML content for the requested page
        fetch(`/page/${page}`)
            .then(response => {
                if (!response.ok) throw new Error(`Failed to load page ${page}: ${response.statusText}`);
                return response.text();
            })
            .then(html => {
                mainContent.innerHTML = html;
                // Initialize the corresponding page function
                if (page === 'dashboard') initDashboard();
                else if (page === 'speedtest') initSpeedTestPage();
                else if (page === 'myip') initMyIpPage();
                else if (page === 'history') initHistoryPage();
                else if (page === 'settings') initSettingsPage();
            })
            .catch(err => mainContent.innerHTML = `<p style="color: red;">Error: ${err.message}</p>`);
    }

    // Add click event listeners to menu items for navigation
    menuItems.forEach(item => {
        item.addEventListener('click', () => {
            menuItems.forEach(i => i.classList.remove('active'));
            item.classList.add('active');
            loadPage(item.getAttribute('data-page'));
        });
    });

    // (NEW) Event Listener for Hamburger Menu
    if (hamburgerBtn && sidebar) {
        hamburgerBtn.addEventListener('click', () => {
            sidebar.classList.toggle('open');
        });

        // Close sidebar when a menu item is clicked on mobile
        menuItems.forEach(item => {
            item.addEventListener('click', () => {
                if (window.innerWidth <= 768) {
                    sidebar.classList.remove('open');
                }
            });
        });
    }


    /**
     * Initializes the dashboard page, including charts and live updates.
     */
    function initDashboard() {
        const timeRangeSelect = document.getElementById('time_range');
        if (timeRangeSelect) {
            timeRangeSelect.addEventListener('change', updateAveragesAndHistory);
        }
        const lineCtx = document.getElementById('networkChart')?.getContext('2d');
        const barCtx = document.getElementById('avgChart')?.getContext('2d');
        if (lineCtx && barCtx) {
            networkChart = new Chart(lineCtx, createChartConfig('line'));
            avgChart = new Chart(barCtx, createChartConfig('bar'));
            updateAveragesAndHistory();
            // Live updates are now managed within updateAveragesAndHistory based on the time range.
        }
    }

    /**
     * Initializes the speed test page. This is the function with the polling logic.
     */
    function initSpeedTestPage() {
        const startBtn = document.getElementById('startTestBtn');
        const statusText = document.getElementById('statusText');
        const resultsPanel = document.getElementById('resultsPanel');
        const serverInfo = document.getElementById('serverInfo');
        const canvas = document.getElementById('speedometer');
        const ctx = canvas?.getContext('2d');
        
        let pollingInterval; // Interval for polling the speed test status
        let animationFrameId; // Frame ID for the speedometer animation loop
        let currentSpeed = 0; // Current displayed speed
        let targetSpeed = 0; // Target speed for animation smoothing

        /**
         * Draws the speedometer gauge on the canvas.
         * @param {number} speed The speed value to display.
         */
        function drawGauge(speed = 0) {
            if (!ctx) return;
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = 140;
            const maxSpeed = 100;
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw the grey background arc
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0.75 * Math.PI, 0.25 * Math.PI);
            ctx.lineWidth = 20;
            ctx.strokeStyle = document.body.classList.contains('dark-mode') ? '#333' : '#e0e0e0';
            ctx.stroke();

            // Draw the colored speed arc if speed is greater than 0
            if (speed > 0) {
                const speedAngle = (Math.min(speed, maxSpeed) / maxSpeed) * 1.5 * Math.PI;
                ctx.beginPath();
                ctx.arc(centerX, centerY, radius, 0.75 * Math.PI, 0.75 * Math.PI + speedAngle);
                ctx.strokeStyle = document.body.classList.contains('dark-mode') ? '#3f9eff' : '#007bff';
                ctx.stroke();
            }

            // Draw the speed text and unit
            ctx.fillStyle = document.body.classList.contains('dark-mode') ? '#e0e0e0' : '#333';
            ctx.font = 'bold 48px Poppins';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(speed.toFixed(1), centerX, centerY - 15);
            ctx.font = '16px Poppins';
            ctx.fillText('Mbps', centerX, centerY + 20);
        }

        /**
         * The animation loop for the speedometer.
         */
        function animate() {
            currentSpeed += (targetSpeed - currentSpeed) * 0.1;
            drawGauge(currentSpeed);
            animationFrameId = requestAnimationFrame(animate);
        }

        drawGauge();

        /**
         * Polls the server for the current status of the speed test.
         */
        function pollStatus() {
            fetch('/speedtest_status')
                .then(response => response.json())
                .then(state => {
                    if (state.status === 'running') {
                        statusText.textContent = 'Tes sedang berjalan...';
                        // Use the real-time speed from the server to update the gauge
                        if (state.data && state.data.download) {
                             targetSpeed = state.data.download;
                        }
                    } else if (state.status === 'complete') {
                        // Test is complete, stop polling and animation
                        clearInterval(pollingInterval);
                        cancelAnimationFrame(animationFrameId);
                        
                        const data = state.data;
                        document.getElementById('pingResult').textContent = data.ping;
                        document.getElementById('downloadResult').textContent = data.download;
                        document.getElementById('uploadResult').textContent = data.upload;
                        document.getElementById('serverResult').textContent = data.server_name;
                        
                        statusText.textContent = 'Tes Selesai!';
                        drawGauge(data.download); // Display the final download speed
                        resultsPanel.style.display = 'grid';
                        serverInfo.style.display = 'block';
                        startBtn.disabled = false;
                        startBtn.querySelector('i').className = 'fas fa-play';
                    } else if (state.status === 'error') {
                        // An error occurred, stop polling and animation
                        clearInterval(pollingInterval);
                        cancelAnimationFrame(animationFrameId);
                        statusText.textContent = `Error: ${state.error}`;
                        drawGauge(0);
                        startBtn.disabled = false;
                        startBtn.querySelector('i').className = 'fas fa-play';
                    }
                })
                .catch(err => {
                    clearInterval(pollingInterval);
                    cancelAnimationFrame(animationFrameId);
                    console.error('Polling error:', err);
                    statusText.textContent = 'Gagal menghubungi server untuk status tes.';
                    drawGauge(0);
                    startBtn.disabled = false;
                    startBtn.querySelector('i').className = 'fas fa-play';
                });
        }

        // Add event listener to the "Start Test" button
        if (startBtn) {
            startBtn.addEventListener('click', () => {
                // Clear any previous polling interval
                if (pollingInterval) clearInterval(pollingInterval);

                // Reset UI elements
                startBtn.disabled = true;
                startBtn.querySelector('i').className = 'fas fa-spinner fa-spin';
                statusText.textContent = 'Memulai tes kecepatan...';
                resultsPanel.style.display = 'none';
                serverInfo.style.display = 'none';
                targetSpeed = 0;
                animate();

                // Start the speed test on the backend
                fetch('/run_speedtest', { method: 'POST' })
                    .then(response => {
                        if (!response.ok) {
                            if (response.status === 409) {
                                throw new Error('Tes lain sedang berjalan.');
                            }
                            throw new Error('Gagal memulai tes.');
                        }
                        return response.json();
                    })
                    .then(data => {
                        if (data.success) {
                            // Start polling for status if the test successfully started
                            pollingInterval = setInterval(pollStatus, 2000);
                        } else {
                            throw new Error(data.message || 'Gagal memulai tes dari server.');
                        }
                    })
                    .catch(err => {
                        statusText.textContent = err.message;
                        startBtn.disabled = false;
                        startBtn.querySelector('i').className = 'fas fa-play';
                        cancelAnimationFrame(animationFrameId);
                        drawGauge(0);
                    });
            });
        }
    }


    /**
     * Initializes the My IP page, fetching and displaying IP information and a map.
     */
    function initMyIpPage() {
        const ipAddressEl = document.getElementById('ipAddress');
        const ispInfoEl = document.getElementById('ispInfo');
        const orgInfoEl = document.getElementById('orgInfo');
        const locationInfoEl = document.getElementById('locationInfo');
        const countryInfoEl = document.getElementById('countryInfo');
        const timezoneInfoEl = document.getElementById('timezoneInfo');
        const copyBtn = document.getElementById('copyIpBtn');
        fetch('/get_my_ip')
            .then(response => {
                if (!response.ok) throw new Error(`Failed to fetch IP info: ${response.statusText}`);
                return response.json();
            })
            .then(data => {
                if (data.success) {
                    ipAddressEl.textContent = data.ip_address || 'Gagal Memuat';
                    ispInfoEl.textContent = data.isp || 'N/A';
                    orgInfoEl.textContent = data.organization || 'N/A';
                    locationInfoEl.textContent = `${data.city || ''}, ${data.region || ''}`.replace(/^, |^ | $/g, '') || 'N/A';
                    countryInfoEl.textContent = data.country || 'N/A';
                    timezoneInfoEl.textContent = data.timezone || 'N/A';
                    if (data.latitude && data.longitude) {
                        document.querySelector('#ipMap .loader-container').style.display = 'none';
                        ipMap = L.map('ipMap').setView([data.latitude, data.longitude], 10);
                        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                            attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                        }).addTo(ipMap);
                        L.marker([data.latitude, data.longitude]).addTo(ipMap)
                            .bindPopup(`<b>Perkiraan Lokasi IP Anda</b><br>${data.city || ''}`).openPopup();
                    } else {
                        document.querySelector('#ipMap .loader-container p').textContent = 'Data Peta Tidak Tersedia';
                    }
                } else {
                    document.querySelector('#ipMap').innerHTML = '<div class="loader-container"><p>Gagal memuat data.</p></div>';
                    [ipAddressEl, ispInfoEl, orgInfoEl, locationInfoEl, countryInfoEl, timezoneInfoEl]
                        .forEach(el => el.textContent = 'Gagal Memuat');
                }
            });
        if (copyBtn) {
            copyBtn.addEventListener('click', () => {
                const ip = ipAddressEl.textContent;
                if (ip && !ip.includes('...')) {
                    // Use document.execCommand for clipboard copy
                    const tempInput = document.createElement('input');
                    tempInput.value = ip;
                    document.body.appendChild(tempInput);
                    tempInput.select();
                    document.execCommand('copy');
                    document.body.removeChild(tempInput);

                    const icon = copyBtn.querySelector('i');
                    icon.className = 'fas fa-check';
                    setTimeout(() => { icon.className = 'fas fa-copy'; }, 1500);
                }
            });
        }
    }

    /**
     * Initializes the history page.
     */
    function initHistoryPage() {
        const tableBody = document.querySelector('#history-table tbody');
        const typeFilter = document.getElementById('type_filter');

        function loadHistory() {
            const recordType = typeFilter.value;
            fetch(`/get_history?time_range=all_data&type=${recordType}`)
                .then(response => {
                    if (!response.ok) throw new Error(`Failed to fetch history: ${response.statusText}`);
                    return response.json();
                })
                .then(data => {
                    tableBody.innerHTML = '';
                    if (data.length === 0) {
                        tableBody.innerHTML = '<tr><td colspan="4">No history data available.</td></tr>';
                        return;
                    }
                    data.forEach(item => {
                        const row = document.createElement('tr');
                        row.innerHTML = `<td>${item.timestamp}</td><td>${item.download.toFixed(2)}</td><td>${item.upload.toFixed(2)}</td><td>${item.type}</td>`;
                        tableBody.appendChild(row);
                    });
                });
        }

        typeFilter.addEventListener('change', loadHistory);
        loadHistory();
    }

    /**
     * Initializes the settings page.
     */
    function initSettingsPage() {
        const themeButton = document.getElementById('theme-switcher-button');
        if (themeButton) themeButton.addEventListener('click', toggleDarkMode);
        
        const clearHistoryBtn = document.getElementById('clearHistoryBtn');
        if (clearHistoryBtn) clearHistoryBtn.addEventListener('click', () => showConfirm('Are you sure you want to delete all network history?', clearHistory));
    }

    /**
     * Fetches and displays live network speed data.
     */
    function liveUpdate() {
        fetch('/get_speed')
            .then(response => {
                if (!response.ok) throw new Error('Network response was not ok');
                return response.json();
            })
            .then(data => {
                const downloadSpan = document.getElementById('download_speed');
                const uploadSpan = document.getElementById('upload_speed');
                if (downloadSpan && uploadSpan) {
                    downloadSpan.textContent = data.download > 0 ? data.download.toFixed(2) : 'N/A';
                    uploadSpan.textContent = data.upload > 0 ? data.upload.toFixed(2) : 'N/A';
                }
                if (networkChart) {
                    const now = new Date();
                    const timeLabel = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;
                    networkChart.data.labels.push(timeLabel);
                    networkChart.data.datasets[0].data.push(data.download || 0);
                    networkChart.data.datasets[1].data.push(data.upload || 0);
                    if (networkChart.data.labels.length > 20) {
                        networkChart.data.labels.shift();
                        networkChart.data.datasets.forEach(dataset => dataset.data.shift());
                    }
                    networkChart.update('none');
                }
            })
            .catch(err => {
                console.error('Live update error:', err);
                const downloadSpan = document.getElementById('download_speed');
                const uploadSpan = document.getElementById('upload_speed');
                if (downloadSpan) downloadSpan.textContent = 'N/A';
                if (uploadSpan) uploadSpan.textContent = 'N/A';
            });
    }

    /**
     * Fetches history data and updates the average speed charts.
     */
    function updateAveragesAndHistory() {
        const timeRange = document.getElementById('time_range')?.value || 'all';

        // Stop live updates when changing the time range
        if (liveUpdateInterval) {
            clearInterval(liveUpdateInterval);
            liveUpdateInterval = null;
        }

        fetch(`/get_history?time_range=${timeRange}`)
            .then(response => {
                if (!response.ok) throw new Error(`Failed to fetch history: ${response.statusText}`);
                return response.json();
            })
            .then(history => {
                if (networkChart && history.length > 0) {
                    networkChart.data.labels = history.map(item => item.timestamp.split(' ')[1]).reverse();
                    networkChart.data.datasets[0].data = history.map(item => item.download || 0).reverse();
                    networkChart.data.datasets[1].data = history.map(item => item.upload || 0).reverse();
                    networkChart.update();
                }
                const avgDownload = history.length ? history.reduce((sum, item) => sum + (item.download || 0), 0) / history.length : 0;
                const avgUpload = history.length ? history.reduce((sum, item) => sum + (item.upload || 0), 0) / history.length : 0;
                const avgDownloadSpan = document.getElementById('avg_download_speed');
                const avgUploadSpan = document.getElementById('avg_upload_speed');
                if (avgDownloadSpan) avgDownloadSpan.textContent = avgDownload.toFixed(2);
                if (avgUploadSpan) avgUploadSpan.textContent = avgUpload.toFixed(2);
                if (avgChart && history.length > 0) {
                    avgChart.data.datasets[0].data = [avgDownload.toFixed(2), avgUpload.toFixed(2)];
                    avgChart.update();
                }

                // Restart live updates only if the 'all' time range is selected
                if (timeRange === 'all') {
                    liveUpdateInterval = setInterval(liveUpdate, 5000);
                }
            })
            .catch(err => console.error('History update error:', err));
    }

    /**
     * Toggles the dark mode class on the body and saves the preference to local storage.
     */
    function toggleDarkMode() {
        document.body.classList.toggle('dark-mode');
        localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
        // Update chart colors on theme change
        if (networkChart) {
            const isDarkMode = document.body.classList.contains('dark-mode');
            const textColor = isDarkMode ? '#e0e0e0' : '#333';
            const gridColor = isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
            networkChart.options.scales.y.ticks.color = textColor;
            networkChart.options.scales.x.ticks.color = textColor;
            networkChart.options.scales.y.title.color = textColor;
            networkChart.options.scales.x.title.color = textColor;
            networkChart.options.scales.y.grid.color = gridColor;
            networkChart.options.scales.x.grid.color = gridColor;
            networkChart.options.plugins.legend.labels.color = textColor;
            networkChart.update();
        }
        if (avgChart) {
             const isDarkMode = document.body.classList.contains('dark-mode');
            const textColor = isDarkMode ? '#e0e0e0' : '#333';
            const gridColor = isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
            avgChart.options.scales.y.ticks.color = textColor;
            avgChart.options.scales.y.title.color = textColor;
            avgChart.options.scales.y.grid.color = gridColor;
            avgChart.options.plugins.legend.labels.color = textColor;
            avgChart.update();
        }
    }
    
    /**
     * Shows a custom confirmation message.
     * @param {string} message The message to display.
     * @param {function} onConfirm The callback function to run if the user confirms.
     */
    function showConfirm(message, onConfirm) {
        const modal = document.createElement('div');
        modal.className = 'confirm-modal';
        modal.innerHTML = `
            <div class="modal-content">
                <p>${message}</p>
                <div class="modal-buttons">
                    <button id="confirm-yes">Yes</button>
                    <button id="confirm-no">No</button>
                </div>
            </div>
        `;
        document.body.appendChild(modal);

        document.getElementById('confirm-yes').addEventListener('click', () => {
            onConfirm();
            document.body.removeChild(modal);
        });

        document.getElementById('confirm-no').addEventListener('click', () => {
            document.body.removeChild(modal);
        });
    }

    // Initialize the dark mode button
    darkModeButton.addEventListener('click', toggleDarkMode);
    if (localStorage.getItem('theme') === 'dark') document.body.classList.add('dark-mode');

    // Load the default page on application start
    loadPage('dashboard');
});

/**
 * Initiates a CSV export by navigating to the export endpoint.
 */
function exportCsv() { window.location.href = '/export_csv'; }

/**
 * Clears the network history via an API call.
 */
function clearHistory() {
    fetch('/clear_history', { method: 'POST' })
        .then(response => {
            if (!response.ok) throw new Error(`Failed to clear history: ${response.statusText}`);
            return response.json();
        })
        .then(data => {
            // Show a success message
            const messageBox = document.createElement('div');
            messageBox.className = 'message-box';
            messageBox.textContent = data.message;
            document.body.appendChild(messageBox);
            setTimeout(() => document.body.removeChild(messageBox), 2000);

            // Reload the active page to reflect the cleared history
            const activePage = document.querySelector('.menu-item.active');
            if (activePage) activePage.click();
        })
        .catch(err => {
            console.error('Failed to clear history:', err);
            const messageBox = document.createElement('div');
            messageBox.className = 'message-box error';
            messageBox.textContent = `Error: ${err.message}`;
            document.body.appendChild(messageBox);
            setTimeout(() => document.body.removeChild(messageBox), 3000);
        });
}

/**
 * Creates the configuration object for a Chart.js chart.
 * @param {string} type The chart type ('line' or 'bar').
 * @returns {object} The Chart.js configuration object.
 */
function createChartConfig(type) {
    const isDarkMode = document.body.classList.contains('dark-mode');
    const gridColor = isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
    const textColor = isDarkMode ? '#e0e0e0' : '#333';
    const baseOptions = {
        responsive: true, maintainAspectRatio: false,
        plugins: { legend: { labels: { color: textColor } } },
        scales: {
            y: { beginAtZero: true, title: { display: true, text: 'Speed (Mbps)', color: textColor }, ticks: { color: textColor }, grid: { color: gridColor } },
            x: { title: { display: true, text: 'Time', color: textColor }, ticks: { color: textColor }, grid: { color: gridColor } }
        }
    };
    if (type === 'line') return { type: 'line', data: { labels: [], datasets: [ { label: 'Download (Mbps)', data: [], borderColor: '#007bff', backgroundColor: 'rgba(0, 123, 255, 0.1)', fill: true, tension: 0.3 }, { label: 'Upload (Mbps)', data: [], borderColor: '#28a745', backgroundColor: 'rgba(40, 167, 69, 0.1)', fill: true, tension: 0.3 } ] }, options: baseOptions };
    if (type === 'bar') return { type: 'bar', data: { labels: ['Avg. Download', 'Avg. Upload'], datasets: [{ label: 'Average Speed (Mbps)', data: [0, 0], backgroundColor: ['#007bff', '#28a745'], borderColor: ['#0056b3', '#1e7e34'], borderWidth: 1 }] }, options: { ...baseOptions, scales: { ...baseOptions.scales, x: { ...baseOptions.scales.x, title: { display: false } } } } };
}

===== END FILE: C:\Users\Ibnu\Project\network-dashboard\static\app.js =====

===== START FILE: C:\Users\Ibnu\Project\network-dashboard\static\style.css =====
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

:root {
    --bg-color: #f4f7fc;
    --sidebar-bg: #ffffff;
    --card-bg: #ffffff;
    --text-color: #333;
    --text-muted-color: #777;
    --primary-color: #007bff;
    --primary-hover-color: #0056b3;
    --download-color: #007bff;
    --upload-color: #28a745;
    --danger-color: #dc3545;
    --shadow-color: rgba(0, 0, 0, 0.05);
    --border-color: #e3e6f0;
}

body.dark-mode {
    --bg-color: #121212;
    --sidebar-bg: #1e1e1e;
    --card-bg: #1e1e1e;
    --text-color: #e0e0e0;
    --text-muted-color: #a0a0a0;
    --primary-color: #3f9eff;
    --primary-hover-color: #5aaeff;
    --border-color: #333;
    --shadow-color: rgba(0, 0, 0, 0.2);
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    font-family: 'Poppins', sans-serif;
    background-color: var(--bg-color);
    color: var(--text-color);
    transition: background-color 0.3s, color 0.3s;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

.dashboard-container { display: flex; height: 100vh; }

.sidebar {
    width: 260px;
    background-color: var(--sidebar-bg);
    border-right: 1px solid var(--border-color);
    display: flex;
    flex-direction: column;
    padding: 20px;
    transition: all 0.3s;
}

.sidebar-header {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 40px;
    font-size: 1.5rem;
    color: var(--primary-color);
}

.sidebar-header h2 { font-weight: 600; }

.sidebar-menu { list-style: none; flex-grow: 1; }

.sidebar-menu li {
    padding: 15px 20px;
    margin-bottom: 10px;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.2s, color 0.2s;
    display: flex;
    align-items: center;
    gap: 15px;
    font-weight: 500;
    color: var(--text-muted-color);
}

.sidebar-menu li.active, .sidebar-menu li:hover { background-color: var(--primary-color); color: #fff; }

.sidebar-footer { margin-top: auto; }

.dark-mode-toggle {
    width: 100%;
    background: none;
    border: 1px solid var(--border-color);
    color: var(--text-muted-color);
    padding: 12px;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    font-size: 1rem;
    transition: all 0.2s;
}

.dark-mode-toggle:hover { background-color: var(--primary-color); color: #fff; border-color: var(--primary-color); }

.content-wrapper {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
}

.main-content {
    flex-grow: 1;
    padding: 30px;
}

.main-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }

.main-header h1 { font-size: 1.8rem; font-weight: 600; }

.header-actions { display: flex; gap: 15px; align-items: center;}

.header-actions button, .filter-container {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 15px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    font-size: 0.9rem;
    font-weight: 500;
    transition: all 0.2s;
}

.header-actions button { background-color: var(--primary-color); color: #fff; }

.header-actions button:hover { background-color: var(--primary-hover-color); transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0, 123, 255, 0.2); }

.header-actions button.danger { background-color: var(--danger-color); }

.header-actions button.danger:hover { background-color: #c82333; box-shadow: 0 4px 10px rgba(220, 53, 69, 0.2); }

.filter-container { background-color: var(--card-bg); border: 1px solid var(--border-color); color: var(--text-muted-color); }

.filter-container select { background: none; border: none; color: var(--text-color); font-family: 'Poppins', sans-serif; font-size: 0.9rem; outline: none; }

body.dark-mode .filter-container select option { background-color: var(--sidebar-bg); }

.notification-banner { background-color: var(--danger-color); color: #fff; padding: 15px; border-radius: 8px; margin-bottom: 20px; text-align: center; font-weight: 500; }

.metrics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px; }

.metric-card {
    background-color: var(--card-bg);
    padding: 25px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    gap: 20px;
    border: 1px solid var(--border-color);
    box-shadow: 0 4px 20px var(--shadow-color);
    transition: transform 0.2s, box-shadow 0.2s;
}

.metric-card:hover { transform: translateY(-5px) scale(1.02); box-shadow: 0 10px 25px var(--shadow-color); }

.metric-icon { font-size: 2rem; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #fff; }

.metric-icon.download { background-color: var(--download-color); }

.metric-icon.upload { background-color: var(--upload-color); }

.metric-icon.avg-download { background-color: #ffc107; }

.metric-icon.avg-upload { background-color: #17a2b8; }

.metric-icon.ping { background-color: #6f42c1; }

.metric-info p { color: var(--text-muted-color); font-size: 0.9rem; margin-bottom: 5px; }

.metric-info h3 { font-size: 1.8rem; font-weight: 600; }

.charts-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; }

@media (max-width: 992px) { .charts-grid { grid-template-columns: 1fr; } }

.chart-card { background-color: var(--card-bg); padding: 20px; border-radius: 12px; border: 1px solid var(--border-color); box-shadow: 0 4px 20px var(--shadow-color); }

.chart-card h4 { margin-bottom: 20px; font-weight: 600; color: var(--text-color); }

.table-container { background-color: var(--card-bg); padding: 20px; border-radius: 12px; box-shadow: 0 4px 20px var(--shadow-color); overflow-x: auto; }

#history-table { width: 100%; border-collapse: collapse; margin-top: 20px; }

#history-table th, #history-table td { padding: 15px; text-align: left; border-bottom: 1px solid var(--border-color); }

#history-table th { font-weight: 600; color: var(--text-color); }

#history-table tbody tr:hover { background-color: var(--bg-color); }

.settings-container { display: grid; gap: 20px; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }

.setting-card { background-color: var(--card-bg); padding: 25px; border-radius: 12px; box-shadow: 0 4px 20px var(--shadow-color); }

.setting-card h3 { font-weight: 600; margin-bottom: 10px; }

.setting-card p { color: var(--text-muted-color); margin-bottom: 20px; line-height: 1.6; }

.setting-actions { display: flex; gap: 10px; }

.action-button { background-color: var(--primary-color); color: #fff; border: none; padding: 10px 15px; border-radius: 8px; cursor: pointer; font-weight: 500; display: flex; align-items: center; gap: 8px; transition: background-color 0.2s; }

.action-button:hover { background-color: var(--primary-hover-color); }

.action-button.danger { background-color: var(--danger-color); }

.action-button.danger:hover { background-color: #c82333; }

.chart-container { position: relative; height: 350px; width: 100%; }

.speedtest-container { display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 30px; padding-top: 40px; }

.speedtest-panel { position: relative; width: 300px; height: 300px; display: flex; align-items: center; justify-content: center; }

#speedometer { position: absolute; top: 0; left: 0; z-index: 1; }

.speedtest-button { position: absolute; z-index: 2; width: 180px; height: 180px; border-radius: 50%; border: 5px solid var(--primary-color); background-color: var(--card-bg); color: var(--primary-color); font-size: 2rem; cursor: pointer; transition: all 0.3s ease; display: flex; flex-direction: column; align-items: center; justify-content: center; box-shadow: 0 10px 20px rgba(0, 123, 255, 0.2); }

.speedtest-button:hover:not(:disabled) { background-color: var(--primary-color); color: #fff; transform: translateY(-5px); }

.speedtest-button:disabled { cursor: not-allowed; background-color: var(--bg-color); color: var(--text-muted-color); border-color: var(--text-muted-color); box-shadow: none; }

.speedtest-button span { font-size: 1.1rem; font-weight: 600; margin-top: 10px; }

.status-text { margin-top: 20px; font-size: 1.1rem; color: var(--text-muted-color); min-height: 24px; }

.results-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; width: 100%; max-width: 900px; }

@media (max-width: 768px) { .results-grid { grid-template-columns: 1fr; } }

.server-info { text-align: center; color: var(--text-muted-color); }

.myip-layout { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; align-items: flex-start; height: calc(100vh - 120px); }

@media (max-width: 1024px) { .myip-layout { grid-template-columns: 1fr; height: auto; } }

.map-container { background-color: var(--card-bg); border: 1px solid var(--border-color); border-radius: 12px; box-shadow: 0 4px 20px var(--shadow-color); height: 100%; }

#ipMap { width: 100%; height: 100%; min-height: 400px; border-radius: 12px; background-color: var(--bg-color); }

#ipMap .loader-container { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; color: var(--text-muted-color); font-size: 1.2rem; }

#ipMap .loader-container i { margin-bottom: 10px; }

.ip-details-container { display: flex; flex-direction: column; gap: 20px; }

.ip-display-card { position: relative; background-color: var(--card-bg); border-radius: 12px; padding: 20px; box-shadow: 0 4px 20px var(--shadow-color); border: 1px solid var(--border-color); }

.ip-display-card p { font-size: 0.9rem; color: var(--text-muted-color); }

.ip-display-card h2 { font-size: 2.2rem; color: var(--primary-color); word-break: break-all; margin-top: 5px; }

.ip-display-card .copy-button { position: absolute; top: 10px; right: 10px; background: var(--bg-color); border: 1px solid var(--border-color); border-radius: 8px; width: 35px; height: 35px; font-size: 1rem; color: var(--text-muted-color); cursor: pointer; transition: all 0.2s; }

.ip-display-card .copy-button:hover { color: var(--primary-color); border-color: var(--primary-color); }

.details-list { background-color: var(--card-bg); border-radius: 12px; padding: 10px 20px; box-shadow: 0 4px 20px var(--shadow-color); border: 1px solid var(--border-color); }

.detail-item { display: flex; align-items: center; gap: 20px; padding: 15px 0; border-bottom: 1px solid var(--border-color); }

.detail-item:last-child { border-bottom: none; }

.detail-item i { font-size: 1.5rem; color: var(--text-muted-color); width: 25px; text-align: center; }

.detail-item div { display: flex; flex-direction: column; }

.detail-item span { font-size: 0.9rem; color: var(--text-muted-color); }

.detail-item strong { font-weight: 500; font-size: 1rem; }

.main-footer-credit {
    padding: 1.5rem 0;
    text-align: center;
    flex-shrink: 0;
}

.main-footer-credit p {
    font-size: 0.875rem;
    color: var(--text-muted-color);
}

/* --- (NEW) CSS for Responsive Mobile View --- */

/* Hamburger Button */
.hamburger-menu {
    display: none; /* Hide on desktop */
    position: absolute;
    top: 20px;
    left: 20px;
    z-index: 1000;
    background-color: var(--card-bg);
    border: 1px solid var(--border-color);
    color: var(--text-color);
    width: 40px;
    height: 40px;
    border-radius: 8px;
    font-size: 1.2rem;
    cursor: pointer;
}

/* Styles for Tablet and below */
@media (max-width: 768px) {
    .dashboard-container {
        flex-direction: column;
    }

    .sidebar {
        position: fixed;
        left: 0;
        top: 0;
        height: 100%;
        z-index: 999;
        transform: translateX(-100%); /* Hide sidebar off-screen */
        transition: transform 0.3s ease-in-out;
        width: 280px; /* Sidebar width when open */
    }

    .sidebar.open {
        transform: translateX(0); /* Show sidebar */
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
    }

    .hamburger-menu {
        display: block; /* Show hamburger button */
    }

    .content-wrapper {
        width: 100%;
    }

    .main-content {
        padding: 70px 20px 20px 20px; /* Add top padding for hamburger space */
    }
    
    .main-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
    }
}

/* (NEW) Styles for small mobile screens */
@media (max-width: 600px) {
    /* Perkecil judul utama */
    .main-header h1 {
        font-size: 1.5rem;
    }

    /* Buat kartu metrik lebih ringkas */
    .metrics-grid {
        grid-template-columns: 1fr; /* Satu kartu per baris */
        gap: 15px;
    }

    .metric-card {
        padding: 15px;
        flex-direction: row;
    }
    
    .metric-icon {
        width: 45px;
        height: 45px;
        font-size: 1.5rem;
    }

    .metric-info h3 {
        font-size: 1.5rem; /* Perkecil ukuran angka kecepatan */
    }

    /* Buat layout speedtest lebih vertikal */
    .charts-grid {
        grid-template-columns: 1fr;
    }

    /* Pastikan peta di halaman Cek IP tidak terlalu tinggi */
    .myip-layout {
        height: auto;
    }
    
    #ipMap {
        min-height: 300px;
    }

    /* Perkecil ukuran tombol start speedtest */
    .speedtest-panel {
        width: 250px;
        height: 250px;
    }
    .speedtest-button {
        width: 150px;
        height: 150px;
        font-size: 1.5rem;
    }
}

===== END FILE: C:\Users\Ibnu\Project\network-dashboard\static\style.css =====

===== START FILE: C:\Users\Ibnu\Project\network-dashboard\templates\dashboard.html =====
<header class="main-header">
    <h1>Network Monitoring Dashboard</h1>
    <div class="header-actions">
        <div class="filter-container">
            <i class="fas fa-filter"></i>
            <select id="time_range">
                <option value="all">Last 10 Records</option>
                <option value="1hour">Last 1 Hour</option>
            </select>
        </div>
    </div>
</header>
<div id="notification" class="notification-banner" style="display: none;"></div>
<section class="metrics-grid">
    <div class="metric-card">
        <div class="metric-icon download">
            <i class="fas fa-arrow-down"></i>
        </div>
        <div class="metric-info">
            <p>Download Speed</p>
            <h3><span id="download_speed">0</span> Mbps</h3>
        </div>
    </div>
    <div class="metric-card">
        <div class="metric-icon upload">
            <i class="fas fa-arrow-up"></i>
        </div>
        <div class="metric-info">
            <p>Upload Speed</p>
            <h3><span id="upload_speed">0</span> Mbps</h3>
        </div>
    </div>
    <div class="metric-card">
        <div class="metric-icon avg-download">
            <i class="fas fa-chart-line"></i>
        </div>
        <div class="metric-info">
            <p>Avg. Download</p>
            <h3><span id="avg_download_speed">0</span> Mbps</h3>
        </div>
    </div>
    <div class="metric-card">
        <div class="metric-icon avg-upload">
            <i class="fas fa-chart-bar"></i>
        </div>
        <div class="metric-info">
            <p>Avg. Upload</p>
            <h3><span id="avg_upload_speed">0</span> Mbps</h3>
        </div>
    </div>
</section>
<section class="charts-grid">
    <div class="chart-card">
        <h4>Speed History (Line Chart)</h4>
        <div class="chart-container">
            <canvas id="networkChart"></canvas>
        </div>
    </div>
    <div class="chart-card">
        <h4>Average Speed (Bar Chart)</h4>
        <div class="chart-container">
            <canvas id="avgChart"></canvas>
        </div>
    </div>
</section>

===== END FILE: C:\Users\Ibnu\Project\network-dashboard\templates\dashboard.html =====

===== START FILE: C:\Users\Ibnu\Project\network-dashboard\templates\history.html =====
<header class="main-header">
    <h1>Full Network History</h1>
    <div class="header-actions">
        <div class="filter-container">
            <i class="fas fa-filter"></i>
            <select id="type_filter">
                <option value="all">All Types</option>
                <option value="Live Monitoring">Live Monitoring</option>
                <option value="Speed Test">Speed Test</option>
            </select>
        </div>
        <button onclick="exportCsv()"><i class="fas fa-file-csv"></i> Export CSV</button>
        <button class="danger" onclick="clearHistory()"><i class="fas fa-trash"></i> Clear All History</button>
    </div>
</header>
<div class="table-container">
    <table id="history-table">
        <thead>
            <tr>
                <th>Timestamp</th>
                <th>Download (Mbps)</th>
                <th>Upload (Mbps)</th>
                <th>Type</th>
            </tr>
        </thead>
        <tbody>
            <tr><td colspan="4">Loading history...</td></tr>
        </tbody>
    </table>
</div>

===== END FILE: C:\Users\Ibnu\Project\network-dashboard\templates\history.html =====

===== START FILE: C:\Users\Ibnu\Project\network-dashboard\templates\layout.html =====
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium Network Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="dashboard-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <img src="{{ url_for('static', filename='images/logo.png') }}" alt="NetMon Logo" height="30">
                <h2 style="margin-left: 5px;">NetMon</h2>
            </div>
            <ul class="sidebar-menu">
                <li data-page="dashboard" class="menu-item active"><i class="fas fa-tachometer-alt"></i> Dashboard</li>
                <li data-page="speedtest" class="menu-item"><i class="fas fa-rocket"></i> Speed Test</li>
                <li data-page="myip" class="menu-item"><i class="fas fa-map-marker-alt"></i> Cek IP Saya</li>
                <li data-page="history" class="menu-item"><i class="fas fa-history"></i> History</li>
                <li data-page="settings" class="menu-item"><i class="fas fa-cog"></i> Settings</li>
            </ul>
            <div class="sidebar-footer">
                <button id="toggleDarkMode" class="dark-mode-toggle">
                    <i class="fas fa-moon"></i><span>Toggle Theme</span>
                </button>
            </div>
        </aside>
        <div class="content-wrapper">
            <!-- Hamburger menu button for mobile view -->
            <button id="hamburger-menu" class="hamburger-menu">
                <i class="fas fa-bars"></i>
            </button>
            
            <main id="main-content" class="main-content">
            </main>
            <footer class="main-footer-credit">
                <p>© All rights reserved - <a href="https://ifauzeee.github.io/portofolio/" target="_blank" rel="noopener" style="text-decoration: none;">Muhammad Ibnu Fauzi</a> <span id="current-year"></span></p>
            </footer>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='app.js') }}"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script>
        document.getElementById('current-year').textContent = new Date().getFullYear();
    </script>
</body>
</html>

===== END FILE: C:\Users\Ibnu\Project\network-dashboard\templates\layout.html =====

===== START FILE: C:\Users\Ibnu\Project\network-dashboard\templates\myip.html =====
<header class="main-header">
    <h1>Informasi IP & Geolokasi</h1>
</header>
<div class="myip-layout">
    <div class="map-container">
        <div id="ipMap">
            <div class="loader-container">
                <i class="fas fa-spinner fa-spin"></i>
                <p>Memuat Peta...</p>
            </div>
        </div>
    </div>
    <div class="ip-details-container">
        <div class="ip-display-card">
            <p>Alamat IP Publik Anda</p>
            <h2 id="ipAddress">...</h2>
            <button id="copyIpBtn" title="Salin Alamat IP">
                <i class="fas fa-copy"></i>
            </button>
        </div>
        <div class="details-list">
            <div class="detail-item">
                <i class="fas fa-network-wired"></i>
                <div>
                    <span>ISP</span>
                    <strong id="ispInfo">...</strong>
                </div>
            </div>
            <div class="detail-item">
                <i class="fas fa-building"></i>
                <div>
                    <span>Organisasi</span>
                    <strong id="orgInfo">...</strong>
                </div>
            </div>
            <div class="detail-item">
                <i class="fas fa-map-pin"></i>
                <div>
                    <span>Lokasi</span>
                    <strong id="locationInfo">...</strong>
                </div>
            </div>
            <div class="detail-item">
                <i class="fas fa-globe"></i>
                <div>
                    <span>Negara</span>
                    <strong id="countryInfo">...</strong>
                </div>
            </div>
            <div class="detail-item">
                <i class="fas fa-clock"></i>
                <div>
                    <span>Zona Waktu</span>
                    <strong id="timezoneInfo">...</strong>
                </div>
            </div>
        </div>
    </div>
</div>

===== END FILE: C:\Users\Ibnu\Project\network-dashboard\templates\myip.html =====

===== START FILE: C:\Users\Ibnu\Project\network-dashboard\templates\settings.html =====
<header class="main-header">
    <h1>Settings</h1>
</header>
<div class="settings-container">
    <div class="setting-card">
        <h3>Theme</h3>
        <p>Switch between light and dark mode for your comfort.</p>
        <button id="theme-switcher-button" class="action-button">
            <i class="fas fa-palette"></i> Toggle Theme
        </button>
    </div>
    <div class="setting-card">
        <h3>Data Management</h3>
        <p>Export your entire network history or clear all recorded data.</p>
        <div class="setting-actions">
            <button onclick="exportCsv()" class="action-button"><i class="fas fa-file-export"></i> Export All Data</button>
            <button onclick="clearHistory()" class="action-button danger"><i class="fas fa-eraser"></i> Clear History</button>
        </div>
    </div>
    <div class="setting-card">
        <h3>About</h3>
        <p>NetMon v1.0 - A premium network monitoring dashboard built with Flask and Chart.js.</p>
    </div>
</div>

===== END FILE: C:\Users\Ibnu\Project\network-dashboard\templates\settings.html =====

===== START FILE: C:\Users\Ibnu\Project\network-dashboard\templates\speedtest.html =====
<header class="main-header">
    <h1>Speed Test</h1>
</header>
<div class="speedtest-container">
    <div class="speedtest-panel">
        <canvas id="speedometer" width="300" height="300"></canvas>
        <button id="startTestBtn" class="speedtest-button">
            <i class="fas fa-play"></i>
            <span>Start Test</span>
        </button>
    </div>
    <p id="statusText" class="status-text">Klik tombol untuk memulai tes kecepatan</p>
    <div id="resultsPanel" class="results-grid" style="display: none;">
        <div class="metric-card">
            <div class="metric-icon ping"><i class="fas fa-stopwatch"></i></div>
            <div class="metric-info">
                <p>Ping</p>
                <h3><span id="pingResult">-</span> ms</h3>
            </div>
        </div>
        <div class="metric-card">
            <div class="metric-icon download"><i class="fas fa-arrow-down"></i></div>
            <div class="metric-info">
                <p>Download</p>
                <h3><span id="downloadResult">-</span> Mbps</h3>
            </div>
        </div>
        <div class="metric-card">
            <div class="metric-icon upload"><i class="fas fa-arrow-up"></i></div>
            <div class="metric-info">
                <p>Upload</p>
                <h3><span id="uploadResult">-</span> Mbps</h3>
            </div>
        </div>
    </div>
    <div id="serverInfo" class="server-info" style="display: none;">
        <p>Tested on server: <strong id="serverResult">-</strong></p>
    </div>
</div>

===== END FILE: C:\Users\Ibnu\Project\network-dashboard\templates\speedtest.html =====

===== START FILE: C:\Users\Ibnu\Project\network-dashboard\.gitignore =====
# Virtual Environment
venv/

# Python cache
__pycache__/
*.pyc

# Database
*.db
*.db-journal

# File hasil ekspor
*.csv

===== END FILE: C:\Users\Ibnu\Project\network-dashboard\.gitignore =====

===== START FILE: C:\Users\Ibnu\Project\network-dashboard\app.py =====
# File: app.py (Diperbaiki)

from flask import Flask, render_template, jsonify, request, send_file
import psutil
import time
from datetime import datetime, timedelta
import pandas as pd
import os
import speedtest
import requests
from sqlalchemy import create_engine, Column, Integer, Float, DateTime, String
from sqlalchemy.orm import sessionmaker
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.exc import SQLAlchemyError
import threading # <-- Ditambahkan
from threading import Lock # <-- Ditambahkan

# --- Inisialisasi Aplikasi Flask dan Konfigurasi ---
app = Flask(__name__)

# Konfigurasi Database
BASE_DIR = os.path.dirname(os.path.abspath(__file__))
DB_PATH = os.path.join(BASE_DIR, 'network_data.db')
DB_URI = f'sqlite:///{DB_PATH}'

# Inisialisasi SQLAlchemy
Base = declarative_base()

class SpeedRecord(Base):
    __tablename__ = 'speeds'
    id = Column(Integer, primary_key=True)
    timestamp = Column(DateTime, nullable=False, default=datetime.now)
    download = Column(Float, nullable=False)
    upload = Column(Float, nullable=False)
    type = Column(String, nullable=False, default="Live Monitoring")

engine = create_engine(DB_URI, echo=False, connect_args={"check_same_thread": False})
Base.metadata.create_all(engine)
Session = sessionmaker(bind=engine)

# --- PERBAIKAN: Variabel Global untuk Background Task ---
# Variabel untuk menyimpan hasil live monitoring
current_network_speed = {"upload": 0.0, "download": 0.0}
speed_lock = Lock()

# Variabel untuk menyimpan status dan hasil speed test
speedtest_state = {'status': 'idle', 'data': None, 'error': None} # idle, running, complete, error
speedtest_lock = Lock()

# --- Fungsi Helper yang Diperbaiki ---

def get_instant_network_speed():
    """Mengukur kecepatan jaringan saat ini (versi blocking internal)."""
    try:
        net_io_start = psutil.net_io_counters()
        time.sleep(1)
        net_io_end = psutil.net_io_counters()
        bytes_sent = net_io_end.bytes_sent - net_io_start.bytes_sent
        bytes_recv = net_io_end.bytes_recv - net_io_start.bytes_recv
        
        upload_speed = (bytes_sent * 8) / (1024 * 1024)
        download_speed = (bytes_recv * 8) / (1024 * 1024)
        
        return {"upload": round(upload_speed, 2), "download": round(download_speed, 2)}
    except Exception:
        return {"upload": 0.0, "download": 0.0}

def save_speed_to_db(download, upload, record_type="Live Monitoring"):
    """Menyimpan data kecepatan ke database dengan tipe."""
    session = Session()
    try:
        new_record = SpeedRecord(
            timestamp=datetime.now(),
            download=download,
            upload=upload,
            type=record_type
        )
        session.add(new_record)
        session.commit()
    except SQLAlchemyError as e:
        session.rollback()
        print(f"Error saat menyimpan ke database: {e}")
    finally:
        session.close()
        
# --- PERBAIKAN: Fungsi untuk Background Thread ---

def background_monitor_speed():
    """Fungsi yang berjalan di background untuk memonitor kecepatan jaringan."""
    while True:
        speeds = get_instant_network_speed()
        with speed_lock:
            global current_network_speed
            current_network_speed = speeds
        # Simpan ke DB setiap 5 detik, cocok dengan interval frontend
        save_speed_to_db(speeds['download'], speeds['upload'], "Live Monitoring")
        time.sleep(4) # Total sleep menjadi 5 detik (1 dari get_instant_network_speed + 4 dari sini)

def background_run_speedtest():
    """Fungsi yang menjalankan speed test di background."""
    global speedtest_state
    with speedtest_lock:
        speedtest_state = {'status': 'running', 'data': None, 'error': None}
    
    try:
        st = speedtest.Speedtest()
        st.get_best_server()
        st.download()
        st.upload()
        results = st.results.dict()
        
        download_mbps = round(results['download'] / 1_000_000, 2)
        upload_mbps = round(results['upload'] / 1_000_000, 2)
        ping_ms = round(results['ping'], 2)
        
        # Simpan hasil ke database
        save_speed_to_db(download_mbps, upload_mbps, "Speed Test")

        with speedtest_lock:
            speedtest_state = {
                'status': 'complete',
                'data': {
                    'download': download_mbps,
                    'upload': upload_mbps,
                    'ping': ping_ms,
                    'server_name': results['server']['name']
                },
                'error': None
            }
            
    except Exception as e:
        print(f"Error Speedtest: {e}")
        with speedtest_lock:
            speedtest_state = {
                'status': 'error',
                'data': None,
                'error': 'Gagal menjalankan speed test. Periksa koneksi Anda.'
            }

# --- Routes Halaman (Tidak Berubah) ---
@app.route('/')
def index():
    return render_template('layout.html')

@app.route('/page/dashboard')
def dashboard_page():
    return render_template('dashboard.html')

# ... (semua rute /page/... lainnya tetap sama) ...
@app.route('/page/speedtest')
def speedtest_page():
    return render_template('speedtest.html')

@app.route('/page/myip')
def myip_page():
    return render_template('myip.html')

@app.route('/page/history')
def history_page():
    return render_template('history.html')

@app.route('/page/settings')
def settings_page():
    return render_template('settings.html')


# --- API Endpoints yang Diperbaiki ---

@app.route('/get_my_ip')
def get_my_ip():
    """API untuk mendapatkan informasi geolokasi dari IP publik (Tidak Berubah)."""
    try:
        geo_response = requests.get('http://ip-api.com/json/', timeout=10)
        geo_response.raise_for_status()
        geo_data = geo_response.json()
        
        if geo_data.get('status') == 'success':
            return jsonify({
                'success': True, 'ip_address': geo_data.get('query'), 'isp': geo_data.get('isp', 'N/A'),
                'organization': geo_data.get('org', 'N/A'), 'city': geo_data.get('city', 'N/A'),
                'region': geo_data.get('regionName', 'N/A'), 'country': geo_data.get('country', 'N/A'),
                'latitude': geo_data.get('lat'), 'longitude': geo_data.get('lon'),
                'timezone': geo_data.get('timezone', 'N/A')
            })
        else:
            return jsonify({'success': False, 'error': 'Gagal mengambil data geolokasi.'}), 500
    except requests.RequestException as e:
        return jsonify({'success': False, 'error': 'Koneksi ke API geolokasi gagal.'}), 500
    except Exception as e:
        return jsonify({'success': False, 'error': 'Terjadi kesalahan saat mengambil informasi IP.'}), 500

@app.route('/get_speed')
def get_speed():
    """API untuk mendapatkan kecepatan saat ini secara non-blocking."""
    with speed_lock:
        return jsonify(current_network_speed)

@app.route('/run_speedtest', methods=['POST'])
def run_speedtest():
    """API untuk memulai speed test di background."""
    with speedtest_lock:
        if speedtest_state['status'] == 'running':
            return jsonify({'success': False, 'message': 'Speed test sudah berjalan.'}), 409
    
    # Jalankan di thread baru
    thread = threading.Thread(target=background_run_speedtest)
    thread.daemon = True
    thread.start()
    
    return jsonify({'success': True, 'message': 'Speed test dimulai.'}), 202

@app.route('/speedtest_status')
def speedtest_status():
    """API untuk memeriksa status speed test."""
    with speedtest_lock:
        return jsonify(speedtest_state)

# ... (rute /get_history, /clear_history, /export_csv tetap sama) ...
@app.route('/get_history')
def get_history():
    """API untuk mengambil riwayat kecepatan dari database."""
    session = Session()
    try:
        time_range = request.args.get('time_range', 'all')
        record_type = request.args.get('type', 'all')
        query = session.query(SpeedRecord).order_by(SpeedRecord.timestamp.desc())

        if time_range == '1hour':
            one_hour_ago = datetime.now() - timedelta(hours=1)
            query = query.filter(SpeedRecord.timestamp >= one_hour_ago)
        elif time_range != 'all_data':
            query = query.limit(10)

        if record_type != 'all':
            query = query.filter(SpeedRecord.type == record_type)

        records = query.all()
        history = [
            {
                "timestamp": record.timestamp.strftime("%Y-%m-%d %H:%M:%S"),
                "download": record.download, "upload": record.upload, "type": record.type
            }
            for record in records
        ]
        return jsonify(history)
    except Exception as e:
        print(f"Error saat mengambil riwayat: {e}")
        return jsonify({"error": "Gagal mengambil riwayat"}), 500
    finally:
        session.close()

@app.route('/clear_history', methods=['POST'])
def clear_history():
    """API untuk menghapus semua riwayat."""
    session = Session()
    try:
        session.query(SpeedRecord).delete()
        session.commit()
        return jsonify({"message": "Riwayat berhasil dihapus"})
    except SQLAlchemyError as e:
        session.rollback()
        print(f"Error saat menghapus riwayat: {e}")
        return jsonify({"message": "Gagal menghapus riwayat"}), 500
    finally:
        session.close()

@app.route('/export_csv')
def export_csv():
    """API untuk mengekspor riwayat ke file CSV."""
    session = Session()
    try:
        query = session.query(SpeedRecord).statement
        df = pd.read_sql(query, engine)
        df['timestamp'] = pd.to_datetime(df['timestamp']).dt.strftime('%Y-%m-%d %H:%M:%S')
        csv_path = os.path.join(BASE_DIR, 'network_history.csv')
        df.to_csv(csv_path, index=False)
        return send_file(csv_path, as_attachment=True, download_name='network_history.csv')
    except Exception as e:
        print(f"Error saat ekspor CSV: {e}")
        return jsonify({"message": "Gagal mengekspor riwayat"}), 500
    finally:
        session.close()

# --- Menjalankan Aplikasi ---
if __name__ == '__main__':
    # Mulai thread background untuk monitoring
    monitor_thread = threading.Thread(target=background_monitor_speed)
    monitor_thread.daemon = True
    monitor_thread.start()
    
    app.run(debug=True)

===== END FILE: C:\Users\Ibnu\Project\network-dashboard\app.py =====

===== START FILE: C:\Users\Ibnu\Project\network-dashboard\network_data.db =====
SQLite format 3   @    �                                                              � .[4
   8 8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          �E�etablespeedsspeedsCREATE TABLE speeds (
	id INTEGER NOT NULL, 
	timestamp DATETIME NOT NULL, 
	download FLOAT NOT NULL, 
	upload FLOAT NOT NULL, 
	type VARCHAR NOT NULL, 
	PRIMARY KEY (id)
)   �    �����m<
�
�
�
X
��T��P
�
�
d
#	�	�	`	��l3��p?��k:	��vE��q@��}<���`/��|K � �                      /E A+2025-08-12 20:49:24.435705Live Monitoring?D A+2025-08-12 20:49:24.419162@����R@�@�����Live Monitoring/C A+2025-08-12 20:49:19.431755Live Monitoring/B A+2025-08-12 20:49:19.446525Live Monitoring?A A+2025-08-12 20:49:14.440003?��Q��?�z�G�{Live Monitoring?@ A+2025-08-12 20:49:14.440003?��Q��?�z�G�{Live Monitoring/? A+2025-08-12 20:49:09.423125Live Monitoring/> A+2025-08-12 20:49:09.420465Live Monitoring/= A+2025-08-12 20:49:04.421283Live Monitoring/< A+2025-08-12 20:49:04.407671Live Monitoring7; A+2025-08-12 20:49:01.040570?��Q��Live Monitoring?: A+2025-08-12 20:48:59.405981?�������?��Q��Live Monitoring?9 A+2025-08-12 20:48:58.522702?���
=p�?�z�G�{Live Monitoring?8 A+2025-08-12 20:48:56.035693?���Q�?�z�G�{Live Monitoring?7 A+2025-08-12 20:48:54.419846?ҏ\(�?�������Live Monitoring?6 A+2025-08-12 20:48:53.543704?�(�\)?�z�G�{Live Monitoring/5 A+2025-08-12 20:48:50.920692Live Monitoring74 A+2025-08-12 20:48:49.439175?�z�G�{Live Monitoring73 A+2025-08-12 20:48:49.428869?�z�G�{Live Monitoring/2 A+2025-08-12 20:48:45.782908Live Monitoring/1 A+2025-08-12 20:48:44.405046Live Monitoring/0 A+2025-08-12 20:48:44.415443Live Monitoring// A+2025-08-12 20:48:40.760446Live Monitoring/. A+2025-08-12 20:48:39.429042Live Monitoring/- A+2025-08-12 20:48:39.429042Live Monitoring/, A+2025-08-12 20:48:35.768815Live Monitoring/+ A+2025-08-12 20:48:34.403200Live Monitoring/* A+2025-08-12 20:48:33.528868Live Monitoring/) A+2025-08-12 20:48:30.575611Live Monitoring?( A+2025-08-12 20:48:28.531396@�\(�?�z�G�Live Monitoring/' A+2025-08-12 20:48:25.862984Live Monitoring/& A+2025-08-12 20:48:25.566862Live Monitoring?% A+2025-08-12 20:48:20.776974?���Q�?�z�G�{Live Monitoring?$ A+2025-08-12 20:48:19.413160?�
=p��
?���Q�Live Monitoring?# A+2025-08-12 20:48:15.754659@��Q�?�z�G�{Live Monitoring7" A+2025-08-12 20:48:14.410708?�z�G�{Live Monitoring?! A+2025-08-12 20:48:10.746168@�\(�?�Q��RLive Monitoring/  A+2025-08-12 20:48:09.410209Live Monitoring? A+2025-08-12 20:48:05.430370?�������?�z�G�{Live Monitoring? A+2025-08-12 20:48:04.401720?���Q�?��Q��Live Monitoring? A+2025-08-12 20:48:00.439298?���Q�?�z�G�{Live Monitoring? A+2025-08-12 20:47:59.426187?�z�G�?�z�G�{Live Monitoring? A+2025-08-12 20:47:55.415046?ۅ�Q�?�z�G�{Live Monitoring? A+2025-08-12 20:47:54.414782?�Q��R?��Q��Live Monitoring/ A+2025-08-12 20:47:50.413221Live Monitoring7 A+2025-08-12 20:47:49.412303?�z�G�{Live Monitoring? A+2025-08-12 20:47:45.299227?�\(�?�
=p��
Live Monitoring? A+2025-08-12 20:47:44.408223@�\(�?���Q�Live Monitoring? A+2025-08-12 20:47:40.354517?�\(�\?�z�G�{Live Monitoring? A+2025-08-12 20:47:39.423199@z�G�{?�z�G�{Live Monitoring? A+2025-08-12 20:47:35.102697?�z�G�{?�z�G�{Live Monitoring? A+2025-08-12 20:47:34.413374?�z�G�{?��Q��Live Monitoring? A+2025-08-12 20:47:29.968476?�z�G�{?��Q��Live Monitoring? A+2025-08-12 20:47:29.423302?�z�G�{?�z�G�{Live Monitoring? A+2025-08-12 20:47:24.917778@ ��\)?ٙ�����Live Monitoring? A+2025-08-12 20:47:24.407674@	333333?���
=p�Live Monitoring/
 A+2025-08-12 20:47:19.893843Live Monitoring/ A+2025-08-12 20:47:18.530596Live Monitoring? A+2025-08-12 20:47:14.874573?�333333?�333333Live Monitoring?
 A+2025-08-12 20:47:09.950265?�p��
=q?�
=p��
Live Monitoring/	 A+2025-08-12 20:47:04.862915Live Monitoring/ A+2025-08-12 20:46:59.877580Live Monitoring/ A+2025-08-12 20:46:54.736993Live Monitoring/ A+2025-08-12 20:46:49.706905Live Monitoring/ A+2025-08-12 20:46:44.790504Live Monitoring/ A+2025-08-12 20:46:39.698892Live Monitoring/ A+2025-08-12 20:46:34.376530Live Monitoring/ A+2025-08-12 20:46:29.406562Live Monitoring: A!2025-08-12 20:45:18.367   �i   �$   �X   �   E
   E � ��b1 ��m<
�
�
�
X
��T��P
�
�
d
#	�	�	`	��l3��p?��k:	��vE��q@��}<���`/��|K � �                      /E A+2025-08-12 20:49:24.435705Live Monitoring?D A+2025-08-12 20:49:24.419162@����R@�@�����Live Monitoring/C A+2025-08-12 20:49:19.431755Live Monitoring/B A+2025-08-12 20:49:19.446525Live Monitoring?A A+2025-08-12 20:49:14.440003?��Q��?�z�G�{Live Monitoring?@ A+2025-08-12 20:49:14.440003?��Q��?�z�G�{Live Monitoring/? A+2025-08-12 20:49:09.423125Live Monitoring/> A+2025-08-12 20:49:09.420465Live Monitoring/= A+2025-08-12 20:49:04.421283Live Monitoring/< A+2025-08-12 20:49:04.407671Live Monitoring7; A+2025-08-12 20:49:01.040570?��Q��Live Monitoring?: A+2025-08-12 20:48:59.405981?�������?��Q��Live Monitoring?9 A+2025-08-12 20:48:58.522702?���
=p�?�z�G�{Live Monitoring?8 A+2025-08-12 20:48:56.035693?���Q�?�z�G�{Live Monitoring?7 A+2025-08-12 20:48:54.419846?ҏ\(�?�������Live Monitoring?6 A+2025-08-12 20:48:53.543704?�(�\)?�z�G�{Live Monitoring/5 A+2025-08-12 20:48:50.920692Live Monitoring74 A+2025-08-12 20:48:49.439175?�z�G�{Live Monitoring73 A+2025-08-12 20:48:49.428869?�z�G�{Live Monitoring/2 A+2025-08-12 20:48:45.782908Live Monitoring/1 A+2025-08-12 20:48:44.405046Live Monitoring/0 A+2025-08-12 20:48:44.415443Live Monitoring// A+2025-08-12 20:48:40.760446Live Monitoring/. A+2025-08-12 20:48:39.429042Live Monitoring/- A+2025-08-12 20:48:39.429042Live Monitoring/, A+2025-08-12 20:48:35.768815Live Monitoring/+ A+2025-08-12 20:48:34.403200Live Monitoring/* A+2025-08-12 20:48:33.528868Live Monitoring/) A+2025-08-12 20:48:30.575611Live Monitoring?( A+2025-08-12 20:48:28.531396@�\(�?�z�G�Live Monitoring/' A+2025-08-12 20:48:25.862984Live Monitoring/& A+2025-08-12 20:48:25.566862Live Monitoring?% A+2025-08-12 20:48:20.776974?���Q�?�z�G�{Live Monitoring?$ A+2025-08-12 20:48:19.413160?�
=p��
?���Q�Live Monitoring?# A+2025-08-12 20:48:15.754659@��Q�?�z�G�{Live Monitoring7" A+2025-08-12 20:48:14.410708?�z�G�{Live Monitoring?! A+2025-08-12 20:48:10.746168@�\(�?�Q��RLive Monitoring/  A+2025-08-12 20:48:09.410209Live Monitoring? A+2025-08-12 20:48:05.430370?�������?�z�G�{Live Monitoring? A+2025-08-12 20:48:04.401720?���Q�?��Q��Live Monitoring? A+2025-08-12 20:48:00.439298?���Q�?�z�G�{Live Monitoring? A+2025-08-12 20:47:59.426187?�z�G�?�z�G�{Live Monitoring? A+2025-08-12 20:47:55.415046?ۅ�Q�?�z�G�{Live Monitoring? A+2025-08-12 20:47:54.414782?�Q��R?��Q��Live Monitoring/ A+2025-08-12 20:47:50.413221Live Monitoring7 A+2025-08-12 20:47:49.412303?�z�G�{Live Monitoring? A+2025-08-12 20:47:45.299227?�\(�?�
=p��
Live Monitoring? A+2025-08-12 20:47:44.408223@�\(�?���Q�Live Monitoring? A+2025-08-12 20:47:40.354517?�\(�\?�z�G�{Live Monitoring? A+2025-08-12 20:47:39.423199@z�G�{?�z�G�{Live Monitoring? A+2025-08-12 20:47:35.102697?�z�G�{?�z�G�{Live Monitoring? A+2025-08-12 20:47:34.413374?�z�G�{?��Q��Live Monitoring? A+2025-08-12 20:47:29.968476?�z�G�{?��Q��Live Monitoring? A+2025-08-12 20:47:29.423302?�z�G�{?�z�G�{Live Monitoring? A+2025-08-12 20:47:24.917778@ ��\)?ٙ�����Live Monitoring? A+2025-08-12 20:47:24.407674@	333333?���
=p�Live Monitoring/
 A+2025-08-12 20:47:19.893843Live Monitoring/ A+2025-08-12 20:47:18.530596Live Monitoring? A+2025-08-12 20:47:14.874573?�333333?�333333Live Monitoring?
 A+2025-08-12 20:47:09.950265?�p��
=q?�
=p��
Live Monitoring/	 A+2025-08-12 20:47:04.862915Live Monitoring/ A+2025-08-12 20:46:59.877580Live Monitoring/ A+2025-08-12 20:46:54.736993Live Monitoring/ A+2025-08-12 20:46:49.706905Live Monitoring/ A+2025-08-12 20:46:44.790504Live Monitoring/ A+2025-08-12 20:46:39.698892Live Monitoring/ A+2025-08-12 20:46:34.376530Live Monitoring/ A+2025-08-12 20:46:29.406562Live Monitoring: A!2025-08-12 20:45:18.367150@Y��z�H@A��Q�Speed Test
   I � ��m<��H
�
�
t
3���_.���j9
�
�
]
$	�	�	�	P	��|;���W���R!���],���X���P��h6��n, � �                                              /� A+2025-08-12 20:55:13.409548Live Monitoring/�
 A+2025-08-12 20:55:12.410503Live Monitoring?� A+2025-08-12 20:55:09.941162?�������?���Q�Live Monitoring/� A+2025-08-12 20:55:08.412649Live Monitoring/�
 A+2025-08-12 20:55:07.407764Live Monitoring/�	 A+2025-08-12 20:55:04.682201Live Monitoring/� A+2025-08-12 20:55:03.427227Live Monitoring/� A+2025-08-12 20:55:02.411730Live Monitoring?� A+2025-08-12 20:54:59.681183?��\(�?�z�G�{Live Monitoring/� A+2025-08-12 20:54:58.418871Live Monitoring/� A+2025-08-12 20:54:57.415844Live Monitoring?� A+2025-08-12 20:54:53.402492?�������?�������Live Monitoring/� A+2025-08-12 20:54:52.405794Live Monitoring/� A+2025-08-12 20:51:48.013798Live Monitoring/�  A+2025-08-12 20:51:46.424842Live Monitoring/ A+2025-08-12 20:51:46.415045Live Monitoring?~ A+2025-08-12 20:51:42.906929?���Q�?�z�G�{Live Monitoring/} A+2025-08-12 20:51:37.898365Live Monitoring/| A+2025-08-12 20:51:32.581837Live Monitoring/{ A+2025-08-12 20:51:27.011721Live Monitoring?z A+2025-08-12 20:51:20.665661?�
=p��
?�������Live Monitoring/y A+2025-08-12 20:51:19.511614Live Monitoring/x A+2025-08-12 20:51:19.474427Live Monitoring/w A+2025-08-12 20:51:15.558891Live Monitoring/v A+2025-08-12 20:51:14.427042Live Monitoring/u A+2025-08-12 20:51:14.420053Live Monitoring/t A+2025-08-12 20:51:10.564776Live Monitoring/s A+2025-08-12 20:51:09.942257Live Monitoring/r A+2025-08-12 20:51:09.931852Live Monitoring/q A+2025-08-12 20:51:05.447295Live Monitoring7p A+2025-08-12 20:51:04.407683?���Q�Live Monitoring7o A+2025-08-12 20:51:04.418186?���Q�Live Monitoring/n A+2025-08-12 20:51:00.448093Live Monitoring7m A+2025-08-12 20:50:59.425425?�z�G�{Live Monitoring7l A+2025-08-12 20:50:59.425425?�z�G�{Live Monitoring?k A+2025-08-12 20:50:54.447903?��Q��?�z�G�{Live Monitoring?j A+2025-08-12 20:50:54.447903@�˳3333@�H�Q�Live Monitoring?i A+2025-08-12 20:50:54.422947?���
=p�?�z�G�{Live Monitoring/h A+2025-08-12 20:50:49.506284Live Monitoring/g A+2025-08-12 20:50:49.450655Live Monitoring/f A+2025-08-12 20:50:45.397865Live Monitoring/e A+2025-08-12 20:50:44.496955Live Monitoring/d A+2025-08-12 20:50:44.458771Live Monitoring7c A+2025-08-12 20:50:39.422433?�z�G�{Live Monitoring7b A+2025-08-12 20:50:39.406688?�z�G�{Live Monitoring7a A+2025-08-12 20:50:34.419733?�z�G�{Live Monitoring7` A+2025-08-12 20:50:34.419733?�z�G�{Live Monitoring7_ A+2025-08-12 20:50:29.421647?�z�G�{Live Monitoring7^ A+2025-08-12 20:50:29.409803?�z�G�{Live Monitoring/] A+2025-08-12 20:50:24.438377Live Monitoring/\ A+2025-08-12 20:50:24.437377Live Monitoring/[ A+2025-08-12 20:50:19.720977Live Monitoring/Z A+2025-08-12 20:50:19.720977Live Monitoring/Y A+2025-08-12 20:50:14.429572Live Monitoring/X A+2025-08-12 20:50:14.418772Live Monitoring/W A+2025-08-12 20:50:09.430237Live Monitoring/V A+2025-08-12 20:50:09.416269Live Monitoring/U A+2025-08-12 20:50:04.430006Live Monitoring/T A+2025-08-12 20:50:04.422929Live Monitoring?S A+2025-08-12 20:49:59.420422?�G�z�H?��Q��Live Monitoring?R A+2025-08-12 20:49:59.420422?�G�z�H?��Q��Live Monitoring/Q A+2025-08-12 20:49:54.416488Live Monitoring/P A+2025-08-12 20:49:54.404185Live Monitoring7O A+2025-08-12 20:49:49.437097?�z�G�{Live Monitoring7N A+2025-08-12 20:49:49.424078?�z�G�{Live Monitoring?M A+2025-08-12 20:49:44.414296?�\(��?�z�G�{Live Monitoring?L A+2025-08-12 20:49:44.402591?�\(��?�z�G�{Live Monitoring7K A+2025-08-12 20:49:39.412328?��Q��Live Monitoring7J A+2025-08-12 20:49:39.392236?��Q��Live Monitoring/I A+2025-08-12 20:49:34.434942Live Monitoring/H A+2025-08-12 20:49:34.418802Live Monitoring/G A+2025-08-12 20:49:29.416231Live Monitoring/F A+2025-08-12 20:49:29.406518Live Monitoring
   J � �|J��r@
�
�
�
h
6
��n<
��tB
�
�
z
H
	�	�	�	N	���T"���R ��zH���>��f4��L
��t:��j8 �                                                        /�X A+2025-08-12 20:59:42.330166Live Monitoring/�W A+2025-08-12 20:59:37.144536Live Monitoring/�V A+2025-08-12 20:59:31.975955Live Monitoring/�U A+2025-08-12 20:59:26.952895Live Monitoring7�T A+2025-08-12 20:59:21.942685?�z�G�{Live Monitoring/�S A+2025-08-12 20:59:16.936735Live Monitoring/�R A+2025-08-12 20:59:11.932066Live Monitoring7�Q A+2025-08-12 20:59:06.930663?�z�G�{Live Monitoring/�P A+2025-08-12 20:59:01.905090Live Monitoring/�O A+2025-08-12 20:58:56.919646Live Monitoring/�N A+2025-08-12 20:58:51.899365Live Monitoring?�M A+2025-08-12 20:58:46.884142?���Q�?�z�G�{Live Monitoring?�L A+2025-08-12 20:58:46.467701?�G�z�H?�\(��Live Monitoring?�K A+2025-08-12 20:58:46.442424?�333333?�\(��Live Monitoring/�J A+2025-08-12 20:58:41.877817Live Monitoring/�I A+2025-08-12 20:58:36.861295Live Monitoring/�H A+2025-08-12 20:58:31.873085Live Monitoring7�G A+2025-08-12 20:58:26.855616?�z�G�{Live Monitoring/�F A+2025-08-12 20:58:21.841850Live Monitoring/�E A+2025-08-12 20:58:16.842404Live Monitoring7�D A+2025-08-12 20:58:11.824951?�z�G�{Live Monitoring?�C A+2025-08-12 20:58:06.809635?�z�G�{?�
=p��
Live Monitoring/�B A+2025-08-12 20:58:01.799173Live Monitoring/�A A+2025-08-12 20:57:56.635804Live Monitoring/�@ A+2025-08-12 20:57:51.489138Live Monitoring/�? A+2025-08-12 20:57:46.425433Live Monitoring/�> A+2025-08-12 20:57:46.415309Live Monitoring?�= A+2025-08-12 20:57:46.405622?�z�G�{?�z�G�{Live Monitoring/�< A+2025-08-12 20:57:41.286906Live Monitoring/�; A+2025-08-12 20:57:36.168752Live Monitoring/�: A+2025-08-12 20:57:31.158578Live Monitoring/�9 A+2025-08-12 20:57:26.032780Live Monitoring/�8 A+2025-08-12 20:57:21.024272Live Monitoring7�7 A+2025-08-12 20:57:16.020939?�z�G�{Live Monitoring/�6 A+2025-08-12 20:57:11.012441Live Monitoring/�5 A+2025-08-12 20:57:06.005820Live Monitoring/�4 A+2025-08-12 20:57:01.073314Live Monitoring/�3 A+2025-08-12 20:56:56.000802Live Monitoring/�2 A+2025-08-12 20:56:51.001107Live Monitoring/�1 A+2025-08-12 20:56:46.419687Live Monitoring/�0 A+2025-08-12 20:56:46.411162Live Monitoring/�/ A+2025-08-12 20:56:45.992838Live Monitoring/�. A+2025-08-12 20:56:40.978549Live Monitoring/�- A+2025-08-12 20:56:35.976568Live Monitoring/�, A+2025-08-12 20:56:30.965100Live Monitoring/�+ A+2025-08-12 20:56:25.989038Live Monitoring/�* A+2025-08-12 20:56:20.981998Live Monitoring/�) A+2025-08-12 20:56:15.976369Live Monitoring/�( A+2025-08-12 20:56:10.944405Live Monitoring/�' A+2025-08-12 20:56:05.943159Live Monitoring/�& A+2025-08-12 20:56:00.937041Live Monitoring/�% A+2025-08-12 20:55:55.937337Live Monitoring/�$ A+2025-08-12 20:55:50.721682Live Monitoring/�# A+2025-08-12 20:55:48.431186Live Monitoring/�" A+2025-08-12 20:55:47.419037Live Monitoring/�! A+2025-08-12 20:55:45.650602Live Monitoring/�  A+2025-08-12 20:55:43.413755Live Monitoring/� A+2025-08-12 20:55:42.405431Live Monitoring/� A+2025-08-12 20:55:40.650730Live Monitoring/� A+2025-08-12 20:55:38.406070Live Monitoring/� A+2025-08-12 20:55:37.400475Live Monitoring/� A+2025-08-12 20:55:35.640656Live Monitoring/� A+2025-08-12 20:55:33.419434Live Monitoring/� A+2025-08-12 20:55:32.416465Live Monitoring/� A+2025-08-12 20:55:30.643142Live Monitoring?� A+2025-08-12 20:55:28.413050?���Q�?�������Live Monitoring/� A+2025-08-12 20:55:27.409018Live Monitoring/� A+2025-08-12 20:55:25.629007Live Monitoring/� A+2025-08-12 20:55:23.421718Live Monitoring?� A+2025-08-12 20:55:22.408961?�z�G�{?�Q��RLive Monitoring/� A+2025-08-12 20:55:19.954285Live Monitoring/� A+2025-08-12 20:55:18.425564Live Monitoring?� A+2025-08-12 20:55:17.423168?��G�z�?�\(��Live Monitoring?� A+2025-08-12 20:55:14.944888?��Q��?�(�\)Live Monitoring
   L � ��Z(���`.
�
�
�
N
���T"���Z(
�
�
�
`
.	�	�	�	f	4	��l:��b0���`.���f4��l: ��j8��p>��vD �                                                /�$ A+2025-08-12 21:05:05.811945Live Monitoring?�# A+2025-08-12 21:05:00.700590?��
=p�?�z�G�{Live Monitoring/�" A+2025-08-12 21:04:55.499190Live Monitoring/�! A+2025-08-12 21:04:50.367032Live Monitoring/�  A+2025-08-12 21:04:46.408295Live Monitoring/� A+2025-08-12 21:04:46.404069Live Monitoring/� A+2025-08-12 21:04:45.258934Live Monitoring/� A+2025-08-12 21:04:40.144747Live Monitoring/� A+2025-08-12 21:04:34.981696Live Monitoring/� A+2025-08-12 21:04:29.870705Live Monitoring/� A+2025-08-12 21:04:24.761158Live Monitoring/� A+2025-08-12 21:04:19.663089Live Monitoring/� A+2025-08-12 21:04:14.655421Live Monitoring/� A+2025-08-12 21:04:09.653030Live Monitoring/� A+2025-08-12 21:04:04.647158Live Monitoring/� A+2025-08-12 21:03:59.641294Live Monitoring7� A+2025-08-12 21:03:54.623762?�z�G�{Live Monitoring/� A+2025-08-12 21:03:49.618992Live Monitoring/� A+2025-08-12 21:03:46.412491Live Monitoring/� A+2025-08-12 21:03:46.397550Live Monitoring/� A+2025-08-12 21:03:44.611496Live Monitoring/� A+2025-08-12 21:03:39.609493Live Monitoring/� A+2025-08-12 21:03:34.587495Live Monitoring/�
 A+2025-08-12 21:03:29.589084Live Monitoring/� A+2025-08-12 21:03:24.577574Live Monitoring/� A+2025-08-12 21:03:19.574927Live Monitoring/�
 A+2025-08-12 21:03:14.572054Live Monitoring/�	 A+2025-08-12 21:03:09.451245Live Monitoring/� A+2025-08-12 21:03:04.318370Live Monitoring/� A+2025-08-12 21:02:59.120070Live Monitoring/� A+2025-08-12 21:02:54.018518Live Monitoring7� A+2025-08-12 21:02:49.010253?�z�G�{Live Monitoring/� A+2025-08-12 21:02:46.407911Live Monitoring/� A+2025-08-12 21:02:46.396927Live Monitoring?� A+2025-08-12 21:02:44.002280?���Q�?�������Live Monitoring/� A+2025-08-12 21:02:39.005882Live Monitoring/�  A+2025-08-12 21:02:33.993018Live Monitoring/� A+2025-08-12 21:02:28.989646Live Monitoring/�~ A+2025-08-12 21:02:23.987939Live Monitoring/�} A+2025-08-12 21:02:18.973684Live Monitoring/�| A+2025-08-12 21:02:13.869187Live Monitoring/�{ A+2025-08-12 21:02:08.683592Live Monitoring/�z A+2025-08-12 21:02:03.575368Live Monitoring/�y A+2025-08-12 21:01:58.555779Live Monitoring/�x A+2025-08-12 21:01:53.545150Live Monitoring/�w A+2025-08-12 21:01:48.575935Live Monitoring/�v A+2025-08-12 21:01:46.414096Live Monitoring/�u A+2025-08-12 21:01:46.408572Live Monitoring/�t A+2025-08-12 21:01:43.537855Live Monitoring/�s A+2025-08-12 21:01:38.535720Live Monitoring/�r A+2025-08-12 21:01:33.518613Live Monitoring/�q A+2025-08-12 21:01:28.510395Live Monitoring/�p A+2025-08-12 21:01:23.510078Live Monitoring/�o A+2025-08-12 21:01:18.516888Live Monitoring/�n A+2025-08-12 21:01:13.493167Live Monitoring/�m A+2025-08-12 21:01:08.369448Live Monitoring/�l A+2025-08-12 21:01:03.335058Live Monitoring/�k A+2025-08-12 21:00:58.313508Live Monitoring/�j A+2025-08-12 21:00:53.291415Live Monitoring/�i A+2025-08-12 21:00:48.304230Live Monitoring/�h A+2025-08-12 21:00:46.497504Live Monitoring/�g A+2025-08-12 21:00:46.497504Live Monitoring/�f A+2025-08-12 21:00:43.284091Live Monitoring?�e A+2025-08-12 21:00:38.282936?�������?�z�G�{Live Monitoring/�d A+2025-08-12 21:00:33.273986Live Monitoring/�c A+2025-08-12 21:00:28.253649Live Monitoring7�b A+2025-08-12 21:00:23.254482?��Q��Live Monitoring/�a A+2025-08-12 21:00:18.248541Live Monitoring/�` A+2025-08-12 21:00:13.231086Live Monitoring/�_ A+2025-08-12 21:00:08.230815Live Monitoring/�^ A+2025-08-12 21:00:03.199542Live Monitoring/�] A+2025-08-12 20:59:57.994186Live Monitoring/�\ A+2025-08-12 20:59:52.741843Live Monitoring/�[ A+2025-08-12 20:59:47.568172Live Monitoring7�Z A+2025-08-12 20:59:46.544180?ə�����Live Monitoring7�Y A+2025-08-12 20:59:46.544180?ə�����Live Monitoring
   E � �|J��r@
�
�
h
6
��f4��l:
�
�
j
8
	�	�	h	6	��N��f$��n,��n,��v<��v4��n,���\* � �                                            7�i A+2025-08-12 21:10:04.021771?�z�G�{Live Monitoring/�h A+2025-08-12 21:09:59.020940Live Monitoring/�g A+2025-08-12 21:09:53.993529Live Monitoring/�f A+2025-08-12 21:09:48.987245Live Monitoring/�e A+2025-08-12 21:09:46.478127Live Monitoring/�d A+2025-08-12 21:09:46.464434Live Monitoring7�c A+2025-08-12 21:09:43.998058?�z�G�{Live Monitoring?�b A+2025-08-12 21:09:38.971108?�\(��?�z�G�{Live Monitoring?�a A+2025-08-12 21:09:33.962743?޸Q��?�z�G�{Live Monitoring?�` A+2025-08-12 21:09:28.974025?�ffffff?�z�G�{Live Monitoring?�_ A+2025-08-12 21:09:23.949816?�������?�z�G�{Live Monitoring?�^ A+2025-08-12 21:09:18.937202?ۅ�Q�?�z�G�{Live Monitoring?�] A+2025-08-12 21:09:13.925025?���Q�?�z�G�{Live Monitoring?�\ A+2025-08-12 21:09:08.914402?�G�z�H?�z�G�{Live Monitoring?�[ A+2025-08-12 21:09:03.705456?��\(�?�z�G�{Live Monitoring7�Z A+2025-08-12 21:08:58.587190?�z�G�{Live Monitoring7�Y A+2025-08-12 21:08:53.581393?���Q�Live Monitoring7�X A+2025-08-12 21:08:48.560760?�\(��Live Monitoring?�W A+2025-08-12 21:08:46.496905?���
=p�?�z�G�{Live Monitoring?�V A+2025-08-12 21:08:46.496905?���
=p�?�z�G�{Live Monitoring?�U A+2025-08-12 21:08:43.470392?�z�G�{?�z�G�{Live Monitoring?�T A+2025-08-12 21:08:38.175132?��Q��?�z�G�{Live Monitoring7�S A+2025-08-12 21:08:33.188040?�z�G�{Live Monitoring?�R A+2025-08-12 21:08:28.162109?�������?�z�G�{Live Monitoring7�Q A+2025-08-12 21:08:23.155695?�z�G�{Live Monitoring?�P A+2025-08-12 21:08:18.140843?�z�G�{?�z�G�{Live Monitoring7�O A+2025-08-12 21:08:13.151209?��Q��Live Monitoring?�N A+2025-08-12 21:08:08.117145?�������?��Q��Live Monitoring?�M A+2025-08-12 21:08:03.133236?�z�G�{?�z�G�{Live Monitoring?�L A+2025-08-12 21:07:58.113075?�z�G�{?��Q��Live Monitoring/�K A+2025-08-12 21:07:53.094700Live Monitoring/�J A+2025-08-12 21:07:48.074463Live Monitoring?�I A+2025-08-12 21:07:46.426546?���Q�?��Q��Live Monitoring?�H A+2025-08-12 21:07:46.419172?���Q�?��Q��Live Monitoring/�G A+2025-08-12 21:07:43.075525Live Monitoring/�F A+2025-08-12 21:07:38.071477Live Monitoring/�E A+2025-08-12 21:07:33.064824Live Monitoring/�D A+2025-08-12 21:07:28.052359Live Monitoring7�C A+2025-08-12 21:07:23.032376?�z�G�{Live Monitoring/�B A+2025-08-12 21:07:18.030849Live Monitoring/�A A+2025-08-12 21:07:12.946080Live Monitoring/�@ A+2025-08-12 21:07:07.783447Live Monitoring/�? A+2025-08-12 21:07:02.623306Live Monitoring7�> A+2025-08-12 21:06:57.495330?�z�G�{Live Monitoring/�= A+2025-08-12 21:06:52.367111Live Monitoring/�< A+2025-08-12 21:06:47.210051Live Monitoring/�; A+2025-08-12 21:06:46.412774Live Monitoring/�: A+2025-08-12 21:06:46.406159Live Monitoring/�9 A+2025-08-12 21:06:42.084906Live Monitoring/�8 A+2025-08-12 21:06:36.962478Live Monitoring/�7 A+2025-08-12 21:06:31.826016Live Monitoring/�6 A+2025-08-12 21:06:26.708306Live Monitoring7�5 A+2025-08-12 21:06:21.549054?�z�G�{Live Monitoring/�4 A+2025-08-12 21:06:16.406580Live Monitoring/�3 A+2025-08-12 21:06:11.290090Live Monitoring/�2 A+2025-08-12 21:06:06.158281Live Monitoring/�1 A+2025-08-12 21:06:01.154419Live Monitoring7�0 A+2025-08-12 21:05:56.150142?�z�G�{Live Monitoring7�/ A+2025-08-12 21:05:51.151850?�z�G�{Live Monitoring/�. A+2025-08-12 21:05:46.420250Live Monitoring/�- A+2025-08-12 21:05:46.405947Live Monitoring/�, A+2025-08-12 21:05:46.125859Live Monitoring/�+ A+2025-08-12 21:05:41.113465Live Monitoring?�* A+2025-08-12 21:05:36.107584?��Q��?�z�G�{Live Monitoring/�) A+2025-08-12 21:05:31.092294Live Monitoring/�( A+2025-08-12 21:05:26.081899Live Monitoring/�' A+2025-08-12 21:05:21.091929Live Monitoring?�& A+2025-08-12 21:05:16.075069?��Q��?��Q��Live Monitoring?�% A+2025-08-12 21:05:13.031930?��
=p��?�(�\)Live Monitoring
   8� ��j8���P
�
�
�
V
$��~L��d"
�
�
l
:
 	�	�	J	��r8���P��P��h&��h&���                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             :�! A!2025-08-12 21:14:51.884960@R��Q�@Al�����Speed Test/�  A+2025-08-12 21:14:02.564886Live Monitoring/� A+2025-08-12 21:13:57.563710Live Monitoring?� A+2025-08-12 21:13:52.561137?�z�G�{?���Q�Live Monitoring7� A+2025-08-12 21:13:47.539746?�z�G�{Live Monitoring?� A+2025-08-12 21:13:46.409108?�z�G�{?�z�G�{Live Monitoring?� A+2025-08-12 21:13:46.404148?�z�G�{?�z�G�{Live Monitoring?� A+2025-08-12 21:13:42.545588?�\(��?�z�G�{Live Monitoring7� A+2025-08-12 21:13:37.538698?��Q��Live Monitoring7� A+2025-08-12 21:13:32.531731?��Q��Live Monitoring7� A+2025-08-12 21:13:27.519906?��Q��Live Monitoring7� A+2025-08-12 21:13:22.503828?�z�G�{Live Monitoring?� A+2025-08-12 21:13:17.481605?�z�G�{?�(�\)Live Monitoring?� A+2025-08-12 21:13:12.258293?�z�G�{?�
=p��
Live Monitoring?� A+2025-08-12 21:13:07.228012?�333333?�z�G�{Live Monitoring7� A+2025-08-12 21:13:02.224370?���
=p�Live Monitoring7� A+2025-08-12 21:12:57.443368?�������Live Monitoring7� A+2025-08-12 21:12:52.218519?��Q��Live Monitoring7� A+2025-08-12 21:12:47.214215?��Q��Live Monitoring7� A+2025-08-12 21:12:46.433904?��Q��Live Monitoring7�
 A+2025-08-12 21:12:46.427125?��Q��Live Monitoring7� A+2025-08-12 21:12:42.226764?�z�G�{Live Monitoring7� A+2025-08-12 21:12:37.215267?�z�G�{Live Monitoring/�
 A+2025-08-12 21:12:32.204653Live Monitoring/�	 A+2025-08-12 21:12:27.198485Live Monitoring?� A+2025-08-12 21:12:22.030665?�z�G�{?�z�G�{Live Monitoring/� A+2025-08-12 21:12:16.753513Live Monitoring?� A+2025-08-12 21:12:11.347881?�z�G�{?�z�G�{Live Monitoring7� A+2025-08-12 21:12:06.349392?�z�G�{Live Monitoring/� A+2025-08-12 21:12:01.169301Live Monitoring/� A+2025-08-12 21:11:56.167050Live Monitoring?� A+2025-08-12 21:11:51.147774?��Q��?�
=p��
Live Monitoring?� A+2025-08-12 21:11:46.467173?�      ?�\(��Live Monitoring?�  A+2025-08-12 21:11:46.438674?��Q�?��G�z�Live Monitoring?� A+2025-08-12 21:11:45.804437@ffffff?��Q�Live Monitoring/�~ A+2025-08-12 21:11:40.547936Live Monitoring?�} A+2025-08-12 21:11:35.529823?�z�G�{?У�
=p�Live Monitoring/�| A+2025-08-12 21:11:30.518910Live Monitoring/�{ A+2025-08-12 21:11:25.497624Live Monitoring?�z A+2025-08-12 21:11:20.469382?�z�G�{?���Q�Live Monitoring/�y A+2025-08-12 21:11:15.449910Live Monitoring/�x A+2025-08-12 21:11:10.374341Live Monitoring/�w A+2025-08-12 21:11:05.051575Live Monitoring/�v A+2025-08-12 21:10:59.909955Live Monitoring/�u A+2025-08-12 21:10:54.916233Live Monitoring/�t A+2025-08-12 21:10:50.012374Live Monitoring/�s A+2025-08-12 21:10:46.498445Live Monitoring/�r A+2025-08-12 21:10:46.498445Live Monitoring/�q A+2025-08-12 21:10:44.871548Live Monitoring?�p A+2025-08-12 21:10:39.728514?�z�G�{?��Q��Live Monitoring/�o A+2025-08-12 21:10:34.245844Live Monitoring?�n A+2025-08-12 21:10:29.269642?�z�G�{?�z�G�{Live Monitoring/�m A+2025-08-12 21:10:24.066441Live Monitoring/�l A+2025-08-12 21:10:19.044075Live Monitoring/�k A+2025-08-12 21:10:14.068119Live Monitoring/�j A+2025-08-12 21:10:09.055318Live Monitoring

===== END FILE: C:\Users\Ibnu\Project\network-dashboard\network_data.db =====

===== START FILE: C:\Users\Ibnu\Project\network-dashboard\Procfile =====
web: gunicorn app:app

===== END FILE: C:\Users\Ibnu\Project\network-dashboard\Procfile =====

===== START FILE: C:\Users\Ibnu\Project\network-dashboard\README.md =====
# Network Dashboard (NetMon)

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python Version](https://img.shields.io/badge/Python-3.8%2B-blue.svg)](https://www.python.org/downloads/)
[![Flask](https://img.shields.io/badge/Flask-3.0%2B-green.svg)](https://flask.palletsprojects.com/)

**NetMon** adalah dashboard pemantauan jaringan premium yang dibangun dengan Flask dan Chart.js. Aplikasi ini memungkinkan pengguna untuk memantau kecepatan jaringan secara real-time, melakukan tes kecepatan internet, melihat informasi geolokasi IP, dan melacak data historis dengan fitur filter berdasarkan tipe.

## Fitur Utama
- **Dashboard**: Pantau kecepatan unduh dan unggah secara real-time dengan grafik garis dan batang untuk data historis dan rata-rata.
- **Speed Test**: Lakukan tes kecepatan internet dengan hasil ping, unduh, dan unggah yang divisualisasikan menggunakan speedometer.
- **Cek IP Saya**: Tampilkan alamat IP publik dan informasi geolokasi pada peta interaktif.
- **History**: Lihat dan filter riwayat kecepatan jaringan berdasarkan tipe (Live Monitoring atau Speed Test) dengan opsi ekspor ke CSV.
- **Settings**: Sesuaikan tema (mode terang/gelap) dan kelola data historis.

## Teknologi yang Digunakan
- **Backend**: Flask (Python)
- **Frontend**: HTML, CSS, JavaScript, Chart.js untuk visualisasi data, Leaflet.js untuk peta
- **Database**: SQLite dengan SQLAlchemy ORM
- **Dependensi**: `psutil`, `pandas`, `speedtest-cli`, `requests`

## Instalasi
Ikuti langkah-langkah berikut untuk menyiapkan dan menjalankan proyek secara lokal.

### Prasyarat
- Python 3.8 atau lebih tinggi
- Git (opsional, untuk mengkloning repository)
- Virtual Environment (disarankan untuk isolasi dependensi)

### Langkah Instalasi
1. **Kloning Repository** (jika belum diunduh):
   ```bash
   git clone https://github.com/ifauzeee/network-dashboard.git
   cd network-dashboard
   ```

2. **Buat Virtual Environment** (disarankan):
   - Pada Windows:
     ```bash
     python -m venv venv
     venv\Scripts\activate
     ```
   - Pada macOS/Linux:
     ```bash
     python3 -m venv venv
     source venv/bin/activate
     ```

3. **Instal Dependensi**:
   ```bash
   pip install -r requirements.txt
   ```
   Jika file `requirements.txt` tidak lengkap atau tidak ada, instal paket yang diperlukan secara manual:
   ```bash
   pip install Flask SQLAlchemy psutil pandas speedtest-cli requests
   ```

4. **Jalankan Aplikasi**:
   ```bash
   flask run
   ```
   Aplikasi akan tersedia di `http://127.0.0.1:5000`.

### Pemecahan Masalah
- **Kesalahan Database**: Jika Anda menemui pesan kesalahan seperti `no such column: speeds.type`, hapus file `network_data.db` di direktori proyek untuk membuat ulang database dengan skema terbaru. Catatan: Ini akan menghapus data historis.
- **Masalah Dependensi**: Pastikan semua paket diinstal di dalam virtual environment. Jika masih ada masalah, periksa versi Python dan instal ulang dependensi.

## Penggunaan
Setelah aplikasi berjalan, buka browser Anda dan kunjungi `http://127.0.0.1:5000`. Berikut adalah panduan singkat untuk setiap fitur:
- **Dashboard**: Melihat kecepatan jaringan real-time dan data historis. Pilih rentang waktu untuk melihat rata-rata kecepatan.
- **Speed Test**: Klik tombol "Start Test" untuk mengukur kecepatan internet Anda. Hasil akan ditampilkan dalam bentuk speedometer dan metrik.
- **Cek IP Saya**: Melihat alamat IP publik Anda dan lokasi perkiraan pada peta interaktif.
- **History**: Melihat riwayat kecepatan jaringan. Gunakan filter untuk memilih tipe data ("All Types", "Live Monitoring", "Speed Test") dan ekspor data sebagai CSV.
- **Settings**: Beralih antara tema terang dan gelap atau hapus riwayat data.

## Struktur Proyek
Berikut adalah struktur direktori utama proyek:
```
network-dashboard/
│
├── static/              # File statis (CSS, JS, gambar)
│   ├── app.js           # Logika frontend JavaScript
│   ├── style.css        # Gaya CSS
│   └── images/          # Gambar seperti logo
│
├── templates/           # Template HTML untuk Flask
│   ├── layout.html      # Template dasar
│   ├── dashboard.html   # Halaman dashboard
│   ├── history.html     # Halaman riwayat dengan filter tipe
│   ├── myip.html        # Halaman informasi IP
│   ├── speedtest.html   # Halaman tes kecepatan
│   └── settings.html    # Halaman pengaturan
│
├── app.py               # File utama aplikasi Flask
├── requirements.txt     # Daftar dependensi
├── network_data.db      # File database SQLite (dibuat saat aplikasi dijalankan)
└── README.md            # Dokumentasi proyek
```

## Screenshots

![Dashboard](static/images/dashboard.png)
![Speed Test](static/images/speed-test.png)
![Cek IP Saya](static/images/Ip.png)
![History - Speed Test](static/images/history-speedtest.png)
![History - Live Monitor](static/images/history-livemonitor.png)

## Kontribusi
Kontribusi sangat diharapkan! Jika Anda ingin berkontribusi, ikuti langkah-langkah berikut:
1. Fork repository ini.
2. Buat branch baru untuk fitur atau perbaikan bug Anda (`git checkout -b feature/nama-fitur`).
3. Commit perubahan Anda (`git commit -m "Menambahkan fitur X"`).
4. Push ke branch Anda (`git push origin feature/nama-fitur`).
5. Buat Pull Request di GitHub.

Silakan buka Issue untuk melaporkan bug, meminta fitur baru, atau memberikan saran.

## Lisensi
Proyek ini dilisensikan di bawah [MIT License](LICENSE). Lihat file lisensi untuk detail lebih lanjut.

## Kontak
- **Author**: Muhammad Ibnu Fauzi
- **GitHub**: [ifauzeee](https://github.com/ifauzeee)
- **Portfolio**: [ifauzeee.github.io/portofolio](https://ifauzeee.github.io/portofolio/)

===== END FILE: C:\Users\Ibnu\Project\network-dashboard\README.md =====

===== START FILE: C:\Users\Ibnu\Project\network-dashboard\requirements.txt =====
Flask
psutil
pandas
speedtest-cli
requests
SQLAlchemy

===== END FILE: C:\Users\Ibnu\Project\network-dashboard\requirements.txt =====

